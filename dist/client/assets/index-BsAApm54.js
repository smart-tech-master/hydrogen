import{r as c,j as C}from"./jsx-runtime-CASrxSZM.js";import{b as E,d as U,A as D,L as $,B,C as H}from"./components-DUsmJGLL.js";const J="modulepreload",W=function(e){return"/"+e},T={},X=function(t,i,u){let o=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),s=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(i.map(n=>{if(n=W(n),n in T)return;T[n]=!0;const d=n.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${h}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":J,d||(l.as="script"),l.crossOrigin="",l.href=n,s&&l.setAttribute("nonce",s),document.head.appendChild(l),d)return new Promise((m,P)=>{l.addEventListener("load",m),l.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${n}`)))})}))}function a(r){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=r,window.dispatchEvent(s),!s.defaultPrevented)throw r}return o.then(r=>{for(const s of r||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};function x(e){if(!e){const t=`flattenConnection(): needs a 'connection' to flatten, but received '${e??""}' instead.`;return console.error(t+" Returning an empty array"),[]}return"nodes"in e?e.nodes:"edges"in e&&Array.isArray(e.edges)?e.edges.map(t=>{if(!(t!=null&&t.node))throw new Error("flattenConnection(): Connection edges must contain nodes");return t.node}):[]}const k={};function G(e,t){const i=k[e];if(i)return i;const u=new Promise((o,a)=>{const r=document.createElement("script");t!=null&&t.module?r.type="module":r.type="text/javascript",r.src=e,r.onload=()=>{o(!0)},r.onerror=()=>{a(!1)},(t==null?void 0:t.in)==="head"?document.head.appendChild(r):document.body.appendChild(r);const s=t==null?void 0:t.attributes;s&&Object.keys(s).forEach(n=>{r.setAttribute(n,s[n])})});return k[e]=u,u}function K(e,t){const[i,u]=c.useState("loading");return c.useEffect(()=>{G(e,t).then(()=>u("done")).catch(()=>u("error"))},[e]),i}function O(e){let{type:t,data:i={},customData:u}=e,o=U(),{publish:a,cart:r,prevCart:s,shop:n,customData:d}=te(),h=o.pathname+o.search,l={...i,customData:{...d,...u},cart:r,prevCart:s,shop:n};return c.useEffect(()=>{n!=null&&n.shopId&&(l={...l,url:window.location.href},a(t,l))},[a,h,n==null?void 0:n.shopId]),null}function Z(e){return C.jsx(O,{...e,type:"product_viewed"})}function z(e){return C.jsx(O,{...e,type:"collection_viewed"})}function Q(e){return C.jsx(O,{...e,type:"search_viewed"})}var Y={canTrack:()=>!1,cart:null,customData:{},prevCart:null,publish:()=>{},shop:null,subscribe:()=>{},register:()=>({ready:()=>{}}),customerPrivacy:null,privacyBanner:null},ee=c.createContext(Y);function te(){let e=c.useContext(ee);if(!e)throw new Error("[h2:error:useAnalytics] 'useAnalytics()' must be a descendent of <AnalyticsProvider/>");return e}var ce={CollectionView:z,ProductView:Z,SearchView:Q},F="cartFormInput";function y({children:e,action:t,inputs:i,route:u,fetcherKey:o}){let a=H({key:o});return C.jsxs(a.Form,{action:u||"",method:"post",children:[(t||i)&&C.jsx("input",{type:"hidden",name:F,value:JSON.stringify({action:t,inputs:i})}),typeof e=="function"?e(a):e]})}y.INPUT_NAME=F;y.ACTIONS={AttributesUpdateInput:"AttributesUpdateInput",BuyerIdentityUpdate:"BuyerIdentityUpdate",Create:"Create",DiscountCodesUpdate:"DiscountCodesUpdate",GiftCardCodesUpdate:"GiftCardCodesUpdate",LinesAdd:"LinesAdd",LinesRemove:"LinesRemove",LinesUpdate:"LinesUpdate",NoteUpdate:"NoteUpdate",SelectedDeliveryOptionsUpdate:"SelectedDeliveryOptionsUpdate",MetafieldsSet:"MetafieldsSet",MetafieldDelete:"MetafieldDelete"};function re(e){let t={};for(let r of e.entries()){let s=r[0],n=e.getAll(s);t[s]=n.length>1?n:r[1]}let{cartFormInput:i,...u}=t,{action:o,inputs:a}=i?JSON.parse(String(i)):{};return{action:o,inputs:{...a,...u}}}y.getFormInput=re;var M="__h_pending_";function ne(e){return M+e}function j(e){return e.startsWith(M)}function de(e){let t=B();if(!t||!t.length)return e;let i=e!=null&&e.lines?structuredClone(e):{lines:{nodes:[]}},u=i.lines.nodes,o=!1;for(let{formData:a}of t){if(!a)continue;let r=y.getFormInput(a);if(r.action===y.ACTIONS.LinesAdd)for(let s of r.inputs.lines){if(!s.selectedVariant){console.error("[h2:error:useOptimisticCart] No selected variant was passed in the cart action. Make sure to pass the selected variant if you want to use an optimistic cart");continue}let n=u.find(d=>{var h;return d.merchandise.id===((h=s.selectedVariant)==null?void 0:h.id)});o=!0,n?(n.quantity=(n.quantity||1)+(s.quantity||1),n.isOptimistic=!0):u.unshift({id:ne(s.selectedVariant.id),merchandise:s.selectedVariant,isOptimistic:!0,quantity:s.quantity||1})}else if(r.action===y.ACTIONS.LinesRemove)for(let s of r.inputs.lineIds){let n=u.findIndex(d=>d.id===s);if(n!==-1){if(j(u[n].id)){console.error("[h2:error:useOptimisticCart] Tried to remove an optimistic line that has not been added to the cart yet");continue}u.splice(n,1),o=!0}else console.warn(`[h2:warn:useOptimisticCart] Tried to remove line '${s}' but it doesn't exist in the cart`)}else if(r.action===y.ACTIONS.LinesUpdate)for(let s of r.inputs.lines){let n=u.findIndex(d=>s.id===d.id);if(n>-1){if(j(u[n].id)){console.error("[h2:error:useOptimisticCart] Tried to update an optimistic line that has not been added to the cart yet");continue}u[n].quantity=s.quantity,u[n].quantity===0&&u.splice(n,1),o=!0}else console.warn(`[h2:warn:useOptimisticCart] Tried to update line '${s.id}' but it doesn't exist in the cart`)}}return o&&(i.isOptimistic=o),i.totalQuantity=u.reduce((a,r)=>a+r.quantity,0),i}var V=c.createContext(void 0);V.Provider;var oe=()=>c.useContext(V);c.forwardRef((e,t)=>{let{waitForHydration:i,src:u,...o}=e,a=oe();return i?C.jsx(ae,{src:u,options:o}):C.jsx("script",{suppressHydrationWarning:!0,...o,src:u,nonce:a,ref:t})});function ae({src:e,options:t}){if(!e)throw new Error("`waitForHydration` with the Script component requires a `src` prop");return K(e,{attributes:t}),null}function le({connection:e,children:t=()=>(console.warn("<Pagination> requires children to work properly"),null),namespace:i=""}){let[u,o]=c.useState(!1),a=E(),r=U();D(),c.useEffect(()=>{a.state==="idle"&&o(!1)},[a.state]);let{endCursor:s,hasNextPage:n,hasPreviousPage:d,nextPageUrl:h,nodes:l,previousPageUrl:m,startCursor:P}=se(e,i),v=c.useMemo(()=>{var g;return{...r.state,pagination:{...((g=r.state)==null?void 0:g.pagination)||{},[i]:{pageInfo:{endCursor:s,hasPreviousPage:d,hasNextPage:n,startCursor:P},nodes:l}}}},[s,n,d,P,l,i,r.state]),f=c.useMemo(()=>c.forwardRef(function(g,w){return n?c.createElement($,{preventScrollReset:!0,...g,to:h,state:v,replace:!0,ref:w,onClick:()=>o(!0)}):null}),[n,h,v]),p=c.useMemo(()=>c.forwardRef(function(g,w){return d?c.createElement($,{preventScrollReset:!0,...g,to:m,state:v,replace:!0,ref:w,onClick:()=>o(!0)}):null}),[d,m,v]);return t({state:v,hasNextPage:n,hasPreviousPage:d,isLoading:u,nextPageUrl:h,nodes:l,previousPageUrl:m,NextLink:f,PreviousLink:p})}function S(e,t){let i=new URLSearchParams(e);return Object.keys((t==null?void 0:t.pagination)||{}).forEach(u=>{let o=u===""?"":`${u}_`,a=`${o}cursor`,r=`${o}direction`;i.delete(a),i.delete(r)}),i.toString()}function I(e){throw new Error(`The Pagination component requires ${"`"+e+"`"} to be a part of your query. See the guide on how to setup your query to include ${"`"+e+"`"}: https://shopify.dev/docs/custom-storefronts/hydrogen/data-fetching/pagination#setup-the-paginated-query`)}function se(e,t=""){e.pageInfo||I("pageInfo"),typeof e.pageInfo.startCursor>"u"&&I("pageInfo.startCursor"),typeof e.pageInfo.endCursor>"u"&&I("pageInfo.endCursor"),typeof e.pageInfo.hasNextPage>"u"&&I("pageInfo.hasNextPage"),typeof e.pageInfo.hasPreviousPage>"u"&&I("pageInfo.hasPreviousPage");let i=E(),u=D(),{state:o,search:a,pathname:r}=U(),s=t?`${t}_cursor`:"cursor",n=t?`${t}_direction`:"direction",d=new URLSearchParams(a).get(n)==="previous",h=c.useMemo(()=>{var f,p,g;return!((f=globalThis==null?void 0:globalThis.window)!=null&&f.__hydrogenHydrated)||!((g=(p=o==null?void 0:o.pagination)==null?void 0:p[t])!=null&&g.nodes)?x(e):d?[...x(e),...o.pagination[t].nodes||[]]:[...o.pagination[t].nodes||[],...x(e)]},[o,e,t]),l=c.useMemo(()=>{var N,_,A,q,R;let f=(N=globalThis==null?void 0:globalThis.window)==null?void 0:N.__hydrogenHydrated,p=(A=(_=o==null?void 0:o.pagination)==null?void 0:_[t])==null?void 0:A.pageInfo,g=!f||(p==null?void 0:p.startCursor)===void 0?e.pageInfo.startCursor:p.startCursor,w=!f||(p==null?void 0:p.endCursor)===void 0?e.pageInfo.endCursor:p.endCursor,b=!f||(p==null?void 0:p.hasPreviousPage)===void 0?e.pageInfo.hasPreviousPage:p.hasPreviousPage,L=!f||(p==null?void 0:p.hasNextPage)===void 0?e.pageInfo.hasNextPage:p.hasNextPage;return(R=(q=o==null?void 0:o.pagination)==null?void 0:q[t])!=null&&R.nodes&&(d?(g=e.pageInfo.startCursor,b=e.pageInfo.hasPreviousPage):(w=e.pageInfo.endCursor,L=e.pageInfo.hasNextPage)),{startCursor:g,endCursor:w,hasPreviousPage:b,hasNextPage:L}},[d,o,t,e.pageInfo.hasNextPage,e.pageInfo.hasPreviousPage,e.pageInfo.startCursor,e.pageInfo.endCursor]),m=c.useRef({params:S(a,o),pathname:r});c.useEffect(()=>{window.__hydrogenHydrated=!0},[]),c.useEffect(()=>{let f=S(a,o),p=m.current.params;(r!==m.current.pathname||f!==p)&&!(i.state==="idle"&&!i.location)&&(m.current={pathname:r,params:S(a,o)},u(`${r}?${S(a,o)}`,{replace:!0,preventScrollReset:!0,state:{nodes:void 0,pageInfo:void 0}}))},[r,a,o]);let P=c.useMemo(()=>{let f=new URLSearchParams(a);return f.set(n,"previous"),l.startCursor&&f.set(s,l.startCursor),`?${f.toString()}`},[a,l.startCursor]),v=c.useMemo(()=>{let f=new URLSearchParams(a);return f.set(n,"next"),l.endCursor&&f.set(s,l.endCursor),`?${f.toString()}`},[a,l.endCursor]);return{...l,previousPageUrl:P,nextPageUrl:v,nodes:h}}function pe(e,t){let i=E(),[u,o]=c.useState([]);if(c.useEffect(()=>{Promise.resolve(t).then(a=>{var r,s;a&&o(a instanceof Array?a:((s=(r=a.product)==null?void 0:r.variants)==null?void 0:s.nodes)||[])}).catch(a=>{reportError(new Error("[h2:error:useOptimisticVariant] An error occurred while resolving the variants for the optimistic product hook.",{cause:a}))})},[JSON.stringify(t)]),i.state==="loading"){let a=new URLSearchParams(i.location.search),r=!1,s=u.find(n=>n.selectedOptions?n.selectedOptions.every(d=>a.get(d.name)===d.value):(r||(r=!0,reportError(new Error("[h2:error:useOptimisticVariant] The optimistic product hook requires your product query to include variants with the selectedOptions field."))),!1));if(s)return{...s,isOptimistic:!0}}return e}c.lazy(()=>X(()=>import("./log-seo-tags-TY72EQWZ-DCHH-_Gl.js"),[]));export{de as $,pe as O,ce as Z,x as f,y as j,oe as q,le as v};
