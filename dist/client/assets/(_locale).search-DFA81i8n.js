import{r as f,j as e}from"./jsx-runtime-CASrxSZM.js";import{v as y,Z as P}from"./index-BsAApm54.js";import{F as S,L as d,u as b}from"./components-DUsmJGLL.js";import{I as g}from"./Image-Cb8ns8_Z.js";import{M as k}from"./Money-BJlzSldM.js";function p({children:t,...r}){const s=f.useRef(null);return E(s),typeof t!="function"?null:e.jsx(S,{method:"get",...r,children:t({inputRef:s})})}function E(t){f.useEffect(()=>{function r(s){var n,i;s.key==="k"&&s.metaKey&&(s.preventDefault(),(n=t.current)==null||n.focus()),s.key==="Escape"&&((i=t.current)==null||i.blur())}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[t])}function o({baseUrl:t,trackingParams:r,params:s,term:n}){let i=new URLSearchParams({...s,q:encodeURIComponent(n)}).toString();return r&&(i=`${i}&${r}`),`${t}?${i}`}function l({term:t,result:r,children:s}){return r!=null&&r.total?s({...r.items,term:t}):null}l.Articles=L;l.Pages=R;l.Products=N;l.Empty=U;function L({term:t,articles:r}){var s;return r!=null&&r.nodes.length?e.jsxs("div",{className:"search-result",children:[e.jsx("h2",{children:"Articles"}),e.jsx("div",{children:(s=r==null?void 0:r.nodes)==null?void 0:s.map(n=>{const i=o({baseUrl:`/blogs/${n.handle}`,trackingParams:n.trackingParameters,term:t});return e.jsx("div",{className:"search-results-item",children:e.jsx(d,{prefetch:"intent",to:i,children:n.title})},n.id)})}),e.jsx("br",{})]}):null}function R({term:t,pages:r}){var s;return r!=null&&r.nodes.length?e.jsxs("div",{className:"search-result",children:[e.jsx("h2",{children:"Pages"}),e.jsx("div",{children:(s=r==null?void 0:r.nodes)==null?void 0:s.map(n=>{const i=o({baseUrl:`/pages/${n.handle}`,trackingParams:n.trackingParameters,term:t});return e.jsx("div",{className:"search-results-item",children:e.jsx(d,{prefetch:"intent",to:i,children:n.title})},n.id)})}),e.jsx("br",{})]}):null}function N({term:t,products:r}){return r!=null&&r.nodes.length?e.jsxs("div",{className:"search-result",children:[e.jsx("h2",{children:"Products"}),e.jsx(y,{connection:r,children:({nodes:s,isLoading:n,NextLink:i,PreviousLink:c})=>{const h=s.map(a=>{var x,j;const v=o({baseUrl:`/products/${a.handle}`,trackingParams:a.trackingParameters,term:t}),m=(x=a==null?void 0:a.selectedOrFirstAvailableVariant)==null?void 0:x.price,u=(j=a==null?void 0:a.selectedOrFirstAvailableVariant)==null?void 0:j.image;return e.jsx("div",{className:"search-results-item",children:e.jsxs(d,{prefetch:"intent",to:v,children:[u&&e.jsx(g,{data:u,alt:a.title,width:50}),e.jsxs("div",{children:[e.jsx("p",{children:a.title}),e.jsx("small",{children:m&&e.jsx(k,{data:m})})]})]})},a.id)});return e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(c,{children:n?"Loading...":e.jsx("span",{children:"↑ Load previous"})})}),e.jsxs("div",{children:[h,e.jsx("br",{})]}),e.jsx("div",{children:e.jsx(i,{children:n?"Loading...":e.jsx("span",{children:"Load more ↓"})})})]})}}),e.jsx("br",{})]}):null}function U(){return e.jsx("p",{children:"No results, try a different search."})}const V=()=>[{title:"Hydrogen | Search"}];function D(){const{type:t,term:r,result:s,error:n}=b();return t==="predictive"?null:e.jsxs("div",{className:"search",children:[e.jsx("h1",{children:"Search"}),e.jsx(p,{children:({inputRef:i})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{defaultValue:r,name:"q",placeholder:"Search…",ref:i,type:"search"})," ",e.jsx("button",{type:"submit",children:"Search"})]})}),n&&e.jsx("p",{style:{color:"red"},children:n}),!r||!(s!=null&&s.total)?e.jsx(l.Empty,{}):e.jsx(l,{result:s,term:r,children:({articles:i,pages:c,products:h,term:a})=>e.jsxs("div",{children:[e.jsx(l.Products,{products:h,term:a}),e.jsx(l.Pages,{pages:c,term:a}),e.jsx(l.Articles,{articles:i,term:a})]})}),e.jsx(P.SearchView,{data:{searchTerm:r,searchResults:s}})]})}export{D as default,V as meta};
